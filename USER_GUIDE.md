# Mochanai_Letters 使用指南

## 应用简介

Mochanai_Letters 是一款基于 AI 技术的小说写作辅助应用,帮助作者通过智能章节规划和内容扩写功能,更高效地创作长篇小说。

## 核心功能

### 1. 小说管理
- **创建小说**: 在首页点击"+ 新建小说"按钮,输入小说标题即可创建
- **查看小说**: 点击小说卡片进入章节列表
- **删除小说**: 长按小说卡片,确认后删除(会同时删除所有章节)

### 2. 章节管理
- **新建章节**: 在章节列表页点击"+ 新建章节"按钮
- **编辑章节**: 点击章节卡片进入编辑页面
- **删除章节**: 长按章节卡片,确认后删除

### 3. AI 辅助写作

#### 3.1 章节规划
点击"新建章节"后,AI 会自动:
1. 分析前文内容(最近 3 章)
2. 从 RAG 向量库检索相关背景
3. 生成章节规划,包括:
   - 章节主题建议
   - 情节发展框架
   - 关键冲突点
   - 人物互动要点

您可以:
- 直接编辑 AI 生成的规划
- 点击"重新生成"获取新的建议
- 点击"开始扩写"进入下一步

#### 3.2 内容扩写
在规划页面点击"开始扩写"后:
1. 输入章节标题
2. 确认或修改章节大纲
3. 点击"生成完整章节"
4. AI 将根据大纲扩写为约 4000 字的完整内容

您可以:
- 手动编辑生成的内容
- 点击"重新生成"获取新版本
- 点击"保存章节"保存到小说中

### 4. RAG 向量存储

每次保存章节后,系统会自动:
1. 将章节内容分块(每块 800 字,重叠 100 字)
2. 生成向量表示
3. 存储到向量数据库

在后续章节创作时,AI 会:
- 从向量库检索相关内容
- 作为背景信息参考
- 保持小说整体连贯性

### 5. AI 配置

点击首页右上角的设置按钮(⚙️),可以配置:

#### 5.1 API Key
- 输入您的 OpenAI 或兼容 API 的密钥
- 格式: `sk-...`

#### 5.2 Base URL
- API 端点地址
- 默认: `https://api.openai.com`
- 支持自定义(如国产大模型)

#### 5.3 模型名称
- 使用的模型名称
- 示例: `gpt-4`, `gpt-3.5-turbo`, `claude-3-opus`

#### 5.4 文笔风格
- 描述您的写作风格
- AI 将尝试模仿这种风格
- 示例: "简洁明快,注重情节推进,对话生动自然"

**注意**: 如果不配置自定义 API,将使用内置的 AI 模型。

## 使用流程

### 完整创作流程

1. **创建小说**
   - 首页 → 点击"+ 新建小说"
   - 输入小说标题
   - 可选:添加简介

2. **配置 AI**(可选)
   - 首页 → 点击设置按钮(⚙️)
   - 输入 API Key 和 Base URL
   - 设置模型名称和文笔风格
   - 点击"保存配置"

3. **创建第一章**
   - 进入小说 → 点击"+ 新建章节"
   - AI 自动生成章节规划
   - 查看并编辑规划内容
   - 点击"开始扩写"

4. **扩写内容**
   - 输入章节标题
   - 确认大纲
   - 点击"生成完整章节"
   - 等待 AI 生成(约 30 秒)
   - 编辑生成的内容
   - 点击"保存章节"

5. **继续创作**
   - 返回章节列表
   - 点击"+ 新建章节"
   - AI 会参考前文和 RAG 库
   - 重复步骤 3-4

## 技术特点

### RAG 技术
- **自动向量化**: 每章保存后自动转为向量
- **智能检索**: AI 自动检索相关背景
- **上下文感知**: 结合前文和全局背景

### AI 模型
- **灵活配置**: 支持多种 OpenAI 兼容 API
- **文笔模仿**: 学习您的写作风格
- **章节规划**: 智能生成情节框架
- **内容扩写**: 将大纲扩写为完整章节

### 数据存储
- **云端同步**: 数据存储在 Supabase
- **跨设备访问**: 登录后可在多设备使用
- **安全可靠**: 数据加密存储

## 常见问题

### Q: AI 生成的内容不满意怎么办?
A: 可以点击"重新生成"按钮,或者手动编辑生成的内容。

### Q: 如何提高 AI 生成质量?
A: 
1. 在设置中详细描述您的文笔风格
2. 前文写得越详细,AI 参考越准确
3. 使用更强大的模型(如 GPT-4)

### Q: 支持哪些 AI 模型?
A: 支持所有 OpenAI 兼容的 API,包括:
- OpenAI: GPT-4, GPT-3.5-turbo
- Anthropic: Claude 系列
- 国产模型: 通义千问、文心一言等(需支持 OpenAI 格式)

### Q: 数据安全吗?
A: 
- 所有数据存储在 Supabase 云端
- API Key 加密存储
- 仅您本人可访问

### Q: 可以导出小说吗?
A: 目前支持在章节详情页复制内容,后续版本将支持导出功能。

## 技术支持

如有问题或建议,请联系开发团队。

---

**版本**: 1.0.0  
**更新日期**: 2026-01-19
