# Mochanai_Letters 项目任务清单

## 项目配置
- [x] 更新应用名称为 Mochanai_Letters
- [x] 生成应用 Logo 并配置到项目中
- [x] 更新 app.config.ts 配置文件

## 数据库设计
- [x] 创建小说表 (novels)
- [x] 创建章节表 (chapters)
- [x] 创建向量表 (chapter_embeddings) 使用 pgvector
- [x] 创建用户配置表 (user_settings)
- [x] 执行数据库迁移

## 后端 API 开发
- [x] 实现小说管理 API (创建、列表、删除)
- [x] 实现章节管理 API (创建、列表、更新、删除)
- [x] 实现用户配置 API (保存和获取 AI 配置)
- [x] 实现文本分块服务
- [x] 实现向量化服务 (集成 OpenAI Embedding API)
- [x] 实现 RAG 向量存储功能
- [x] 实现 RAG 向量检索功能
- [x] 实现 AI 章节规划功能
- [x] 实现 AI 内容扩写功能

## 移动端界面开发
- [x] 设计并实现小说列表页面
- [x] 设计并实现章节列表页面
- [x] 设计并实现章节编辑页面
- [x] 设计并实现 AI 规划页面
- [x] 设计并实现 AI 扩写页面
- [x] 设计并实现设置页面 (AI 配置)
- [x] 实现页面导航和路由

## 功能集成
- [x] 集成 tRPC 客户端调用后端 API
- [x] 实现小说和章节的增删改查
- [x] 实现 AI 规划功能的前后端联调
- [x] 实现 AI 扩写功能的前后端联调
- [x] 实现章节保存后自动向量化
- [x] 实现用户 AI 配置的保存和读取

## 测试和优化
- [x] 测试小说和章节管理功能
- [x] 测试 RAG 向量检索准确性
- [x] 测试 AI 规划和扩写功能
- [x] 测试用户配置功能
- [x] 优化界面交互体验
- [x] 处理错误和异常情况

## 交付
- [x] 创建项目检查点
- [x] 编写使用文档

## 章节大纲视图功能
- [x] 设计章节大纲视图界面
- [x] 实现树状图展示章节结构
- [x] 添加章节主题显示
- [x] 实现章节关系可视化
- [x] 添加导航入口(章节列表页)
- [x] 测试大纲视图功能
- [x] 创建新检查点

## 小说导出功能
- [x] 实现 TXT 格式导出
- [x] 实现 DOCX 格式导出 (通过 Markdown)
- [ ] 实现 PDF 格式导出 (即将推出)
- [x] 创建后端导出 API
- [x] 添加导出按钮到小说详情页
- [x] 实现导出进度提示
- [x] 测试导出功能
- [x] 创建新检查点

## 水墨风格修改
- [x] 修改主题配色为水墨风格(米白、墨黑、朱砂红)
- [x] 更新应用名称为"墨文"
- [x] 更新 app.config.ts 配置
- [x] 测试整体视觉效果
- [x] 创建新检查点

## 书法字体集成
- [x] 集成思源宋体字体文件
- [x] 配置字体到 Tailwind
- [x] 应用字体到标题和重要文本
- [x] 测试字体显示效果
- [x] 创建新检查点

## AI 封面生成功能
- [x] 实现后端 AI 图片生成服务
- [x] 创建封面生成 API
- [x] 添加封面字段到小说表
- [x] 实现封面生成页面
- [x] 在小说列表显示封面
- [x] 测试封面生成功能
- [x] 创建新检查点

## 云同步优化功能
- [x] 添加数据同步状态指示
- [x] 实现手动备份导出(JSON 格式)
- [x] 添加备份导入功能
- [x] 在设置页添加同步和备份入口
- [x] 测试备份和同步功能
- [x] 创建新检查点

## ePub 格式导出功能
- [x] 安装 epub-gen-memory 库
- [x] 实现 ePub 格式导出服务
- [x] 添加 ePub 导出 API
- [x] 在导出页面添加 ePub 选项
- [x] 测试 ePub 导出功能
- [x] 创建新检查点

## 灵感笔记功能
- [x] 设计笔记数据表
- [x] 实现笔记管理 API (创建、列表、更新、删除)
- [x] 创建笔记列表页面
- [x] 创建笔记编辑页面
- [x] 支持笔记关联到小说
- [x] 添加笔记分类(灵感、人物、世界观等)
- [x] 在主页添加笔记入口
- [x] 测试笔记功能
- [ ] 创建新检查点
